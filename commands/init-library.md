# Init Library

Initialize a new Python library with modern tooling.

## Ask the User

Before starting, ask:
1. **Library name** - What should we call this package?
2. **Short description** - One-line description for PyPI
3. **Runtime dependencies** - Any packages needed? (can be added later)
4. **CLI executable?** - Should this package install a command-line tool? (like dirdotenv)

## File Structure

```
<library_name>/
├── <library_name>/           # Main package
│   ├── __init__.py          # Package exports
│   ├── cli.py               # CLI entry point (if executable)
│   └── __version__.py       # Version: __version__ = "0.0.1"
├── tests/                   # Tests
│   └── __init__.py
├── .github/
│   └── workflows/
│       └── test.yml         # CI: pytest on multiple Python versions
├── Makefile                 # Development commands
├── pyproject.toml          # Package config
├── README.md               # Documentation
├── .gitignore              # Standard Python ignores
├── .python-version         # Python version (e.g., "3.13")
└── uv.lock                 # Generated by `uv sync`
```

## pyproject.toml Template

```toml
[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[project]
name = "<library_name>"
description = "<description>"
readme = "README.md"
license = {text = "WTFPL"}
requires-python = ">=3.10"
dynamic = ["version"]

dependencies = [
    # Add runtime dependencies here
]

authors = [
    {name = "<your-name>", email = "<your-email>"}
]

keywords = []
classifiers = [
    "Development Status :: 3 - Alpha",
    "Intended Audience :: Developers",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
]

[dependency-groups]
dev = [
    "hatch",
    "pytest",
    "pytest-cov",
    "ruff",
]

[tool.hatch.build.targets.wheel]
packages = ["<library_name>"]

[tool.hatch.version]
path = "<library_name>/__version__.py"

[tool.pytest.ini_options]
testpaths = ["tests"]

[tool.ruff]
line-length = 100
target-version = "py310"
```

## Makefile Template

```makefile
.PHONY: test setup shell coverage publish-build publish-test publish publish-clean

test:
	uv run pytest

setup:
	uv sync --dev

shell:
	uv shell

coverage:
	uv run pytest --cov=<library_name> --cov-report=term-missing

publish-build:
	uv run hatch build

publish-test:
	uv run hatch publish --repo test

publish:
	uv run hatch publish

publish-clean:
	rm -r dist/
```

## __version__.py Template

```python
__version__ = "0.0.1"
```

## CLI Entry Point (if executable)

Add to `pyproject.toml`:

```toml
[project.scripts]
<library_name> = "<library_name>.cli:main"
```

**cli.py template:**

```python
import argparse

def main():
    parser = argparse.ArgumentParser(description="<description>")
    parser.add_argument("--verbose", action="store_true", help="Verbose output")
    args = parser.parse_args()

    # Your CLI logic here
    print("Hello from <library_name>!")

if __name__ == "__main__":
    main()
```

After installing with `uv sync`, the command `<library_name>` will be available.

## Installation Commands

After creating files, install dev dependencies:

```bash
cd <library_name>
uv sync --dev
```

This installs:
- **hatch** - Build and publish to PyPI
- **pytest** - Testing framework
- **pytest-cov** - Coverage reporting
- **ruff** - Linting and formatting

## Common Dev Commands

```bash
make test           # Run tests
make coverage       # Run tests with coverage
make shell          # Enter dev environment
make publish-build  # Build package
make publish-test   # Test PyPI
make publish        # Publish to PyPI
```

## CI/CD (.github/workflows/test.yml)

```yaml
name: Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: ["3.10", "3.11", "3.12", "3.13"]
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: ${{ matrix.python-version }}
      - run: pip install uv
      - run: uv sync
      - run: uv run pytest
```

## .gitignore Template

```
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
*.egg-info/
.installed.cfg
*.egg
MANIFEST
.pytest_cache/
.coverage
htmlcov/
.vscode/
.idea/
*.wav
```

## .python-version

```
3.13
```

Or use `3.10`, `3.11`, `3.12`, `3.13` - matches the minimum supported version.
